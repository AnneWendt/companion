<!DOCTYPE html>
<html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script>
	var socket = io();

	socket.on('serial ids', function(data) {
		var select = document.getElementById("portlist");
		console.log(data);
		var lines = data.trim().split('\n');
		lines.forEach(function(line) {
			var option = document.createElement('option');
			option.value = line;
			option.innerHTML = line;
			select.appendChild(option);
			console.log(line);
		});
		console.log(lines);
	})

	function setupRoute() {

		var _left = document.getElementById("portlist");
		var left = _left.options[_left.selectedIndex].text;

		var _direction = document.getElementById("direction");
		var direction = _direction.options[_direction.selectedIndex].value;

		var _right = document.getElementById("udpPort");
		var right = _right.value;

		socket.emit('setup route', {
			'left' : left,
			'right' : right,
			'direction' : direction
		});
	}
	
	socket.emit('get serial ids');

</script>
</head>
<div>
	<select id="portlist"></select>
	<select id="direction">
		<option value="right">----></option>
		<option value="left"><----</option>
		<option value="right-left"><---></option>
	</select> <input id="udpPort"></input>
</div>
<div>
	<button onclick="setupRoute()">Refresh</button>
</div>
</html>